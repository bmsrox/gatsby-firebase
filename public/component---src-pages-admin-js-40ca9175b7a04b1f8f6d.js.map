{"version":3,"sources":["webpack:///./src/lib/events.js","webpack:///./src/components/Messages/index.js","webpack:///./src/components/Notifications/index.js","webpack:///./src/admin/pages/change-password.js","webpack:///./src/pages/admin.js"],"names":["inputChange","event","setstate","seterror","value","target","field","name","oldstate","error","console","Error","message","class","role","Success","ShowEmailNotification","auth","useAuth","useState","emailSent","setEmailSent","setError","useEffect","isAuthReady","isAuth","navigate","resendEmailVerification","a","emailVerified","className","email","onClick","ChangePassword","success","setSuccess","currentPassword","password","confirm_password","changePasswordForm","setChangePasswordForm","onChange","e","changePassword","length","user","firebase","currentUser","credential","EmailAuthProvider","reauthenticateWithCredential","updatePassword","type","placeholder","Admin","Layout","admin","basepath","path"],"mappings":"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","file":"component---src-pages-admin-js-40ca9175b7a04b1f8f6d.js","sourcesContent":["export const inputChange = (event, setstate, seterror) => {\n  try {\n    const value = event.target.value\n    const field = event.target.name\n\n    setstate(oldstate => ({...oldstate, [field]: value}))\n\n    if (typeof seterror === 'function') {\n      seterror('')\n    }\n  } catch (error) {\n    console.error(error)\n  }\n}","import React from 'react';\n\nexport const Error = ({ message }) => {\n  return (\n    <div class=\"flex items-center bg-red-500 text-white mb-3 text-sm font-bold px-4 py-3\" role=\"alert\">\n      <p>{message}</p>\n    </div>\n  )\n}\n\nexport const Success = ({ message }) => {\n  return (\n    <div class=\"flex items-center bg-green-500 text-white mb-3 text-sm font-bold px-4 py-3\" role=\"alert\">\n      <p>{message}</p>\n    </div>\n  )\n}","import React, { useEffect, useState } from 'react';\nimport { navigate } from 'gatsby'\nimport { useAuth } from '../../lib/AuthContext'\n\nexport const ShowEmailNotification = () => {\n  const auth = useAuth()\n  const [emailSent, setEmailSent] = useState(false);\n  const [error, setError] = useState(false);\n  useEffect(() => {\n    if (auth.isAuthReady && !auth.isAuth) {\n      navigate('/')\n    }\n  }, [auth])\n\n  const resendEmailVerification = async () => {\n    try {\n      setError(false)\n      await auth.resendEmailVerification()\n      setEmailSent(true)\n    } catch(error) {\n      setError(true)\n      setEmailSent(true)\n    }\n  }\n\n  if (!auth.isAuthReady) {\n    return null\n  }\n\n  if (!auth.emailVerified) {\n    return (\n      <div className='bg-orange-200 p-4'>\n        <p className='container mx-auto text-center'>Please, confirm your email address ({auth.email}) <br />\n        { !emailSent && <button \n            onClick={resendEmailVerification}>Click here to resend email confirmation</button> \n        }\n        { emailSent && <>\n            <br /> Verification email sent. Please, check your inbox and follow the instructions\n          </>\n        }\n        { error && <>\n            <br /> Error, try again in few minutes.\n          </>\n        }\n        </p>\n      </div>\n    )\n  }\n\n  return null\n}\n","import React, { useState, useEffect } from 'react';\nimport Helmet from 'react-helmet'\n//import { navigateTo, Link } from 'gatsby'\nimport { useAuth } from '../../lib/AuthContext'\nimport firebase from '../../lib/firebase'\nimport { Success, Error } from '../../components/Messages'\nimport { inputChange } from '../../lib/events'\n\nconst ChangePassword = () => {\n\n  const auth = useAuth()\n  const [error, setError] = useState('')\n  const [success, setSuccess] = useState(false)\n  const [\n    changePasswordForm, \n    setChangePasswordForm\n  ] = useState({\n    currentPassword: '',\n    password: '',\n    confirm_password: ''\n  })\n\n  const onChange = (e) => {\n    inputChange(e, setChangePasswordForm, setError);\n  }\n\n  const changePassword = async () => {\n    setError('')\n    const { currentPassword, password, confirm_password } = changePasswordForm\n\n    if (password.length < 6 && password === confirm_password) {\n      return setError('Password must be at least 6 characters long.')\n    } else if (password !== confirm_password) {\n      return setError('Password does not match!')\n    }\n\n    try {\n      const user = firebase.auth().currentUser;\n      const credential = firebase.auth.EmailAuthProvider.credential(\n          auth.email,\n          currentPassword\n      );\n      await user.reauthenticateWithCredential(credential)\n      await user.updatePassword(password)\n      setSuccess(true)\n    } catch (error) {\n      setError(error.message)\n      setSuccess(false)\n    }\n  }\n\n  return (\n    <>\n      <Helmet>\n        <title>Change Password</title>\n      </Helmet>\n\n      <div className='max-w-sm mx-auto flex-1 flex flex-col items-center justify-center px-2 py-4'>\n\n        <h1 className='mb-8 text-3xl text-center'>Change Password</h1>\n        { success && <Success message=\"Your password has been changed.\" />}\n\n        { !success && <>\n            <input\n              type='password'\n              className='block border border-grey-light w-full p-3 rounded mb-4'\n              name='currentPassword'\n              value={changePasswordForm.currentPassword}\n              onChange={onChange}\n              placeholder='Current Password' />\n            <input\n              type='password'\n              className='block border border-grey-light w-full p-3 rounded mb-4'\n              name='password'\n              value={changePasswordForm.password}\n              onChange={onChange}\n              placeholder='Password' />\n            <input\n              type='password'\n              className='block border border-grey-light w-full p-3 rounded mb-4 '\n              name='confirm_password'\n              value={changePasswordForm.confirm_password}\n              onChange={onChange}\n              placeholder='Confirm Password' />\n\n            {error && <Error message={error} />}\n\n            <button\n              onClick={changePassword}\n              className='w-full text-center py-3 rounded bg-green-600 text-white hover:bg-green-500 focus:outline-none my-1'\n            >Submit</button>\n            </>\n        }       \n      </div>\n    </>\n  )\n};\n\nexport default ChangePassword;\n","import React from 'react'\nimport { Router } from '@reach/router'\nimport Layout from '../components/Layout'\nimport { ShowEmailNotification } from '../components/Notifications'\nimport ChangePassword from '../admin/pages/change-password'\n\nconst Admin = () => {\n  return (\n      <Layout admin>\n        <ShowEmailNotification/>\n        <Router basepath='/admin'>\n          <ChangePassword path=\"/password\" />\n        </Router>\n      </Layout>\n  )\n}\n\nexport default Admin"],"sourceRoot":""}